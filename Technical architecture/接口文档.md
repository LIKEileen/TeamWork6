### **一、登录界面**

**1.登录接口**

- **接口名称**：/api/login
- **功能**：接收用户名、密码和验证码，验证用户身份，返回登录结果（成功或失败）。成功时返回用户 token 或 session 信息，失败时返回错误信息（如“密码错误”或“验证码错误”）。

**2.获取验证码接口**

- **接口名称**：/api/captcha
- **功能**：生成并返回验证码图片或文本（例如“nlwp”），同时将验证码存储在后端（如 session 或数据库），以便登录时校验。

**3.忘记密码接口**

- **接口名称**：/api/forgot-password
- **功能**：接收用户输入（可能是用户名或邮箱），验证用户身份后发送重置密码的链接或验证码到用户邮箱/手机，用于后续密码重置流程。

**4.注册接口**

- **接口名称**：/api/register
- **功能**：接收新用户的信息（如用户名、密码、邮箱等），验证信息合法性（例如用户名是否已存在），然后创建新用户账户，返回注册结果。



### 二、组织看板

**1.看板界面展示时间热力图**

- **接口名称**：/api/heatmap
- **功能**：获取指定组织的时间热力图数据，返回每个时间段的占用人数。前端根据 heatmap 数据渲染热力图，人数越多颜色越深。

**2.切换组织查看热力图**

- **接口名称**：/api/organizations
- **功能**：获取用户可访问的组织列表，用于下拉框。前端在页面加载时调用 /api/organizations 获取组织列表，填充下拉框。选择组织后，调用 /api/heatmap?organization=<org_name> 刷新热力图。



### 三、**我的日程**

**1.看板展示个人日程**

- **接口名称**：/api/schedule
- **功能**：获取当前用户的日程数据，返回日程列表。页面加载时，前端调用 /api/schedule，获取日程数据并渲染到表格中。

**2.通过Excel导入日程**

- **接口名称**：/api/import/excel
- **功能**：接收上传的 Excel 文件，解析日程数据，保存到用户日程中。

**3.通过学校网站导入日程**

- **接口名称**：/api/import/school
- **功能**：接收用户提供的学校网站凭据（如果需要登录），从网站获取日程，保存到用户日程中。

**4.手动添加长期事件**

- **接口名称**：/api/schedule/add
- **功能**：接收用户输入的事件信息，保存到用户日程中。



### 四、我的组织

##### 1. 默认展现用户加入、创建、管理的所有组织

- **接口名称**：/api/user/organizations
- **功能**：获取当前用户相关的组织列表。

##### 2. 点击组织名称展开显示成员（含特殊标识）

- **接口名称**：/api/organization/<org_id>/members
- **功能**：获取指定组织的所有成员及其角色。**前端**点击组织名称后，调用此接口，展开成员列表，显示用户名和角色（例如用图标或标签标识“创建者”和“管理员”）。

##### 3. 右键组织名称显示更多选项

**功能**：右键组织名称，显示“修改组织名称”、“删除组织”、“设置管理员”选项。

###### **3.1 修改组织名称**

- **接口名称**：/api/organization/<org_id>/rename
- **功能**：修改指定组织的名称（仅限创建者或管理员）。

###### **3.2 删除组织**

- **接口名称**：/api/organization/<org_id>/delete
- **功能**：删除指定组织（仅限创建者）。

###### **3.3 设置管理员**

- **接口名称**：/api/organization/<org_id>/set-admin
- **功能**：设置组织管理员（最多 3 人，仅限创建者操作）。

##### 4. 加入组织

**功能**：用户输入组织 ID 申请加入，等待创建者或管理员同意。

###### 4.1 提交加入申请

- **接口名称**：/api/organization/join
- **功能**：提交加入组织的申请。

###### **4.2 获取申请列表（供创建者/管理员查看）**

- **接口名称**：/api/organization/<org_id>/join-requests
- **功能**：获取指定组织的加入申请列表。

###### **4.3 处理加入申请**

- **接口名称**：/api/organization/<org_id>/join-request/approve
- **功能**：创建者或管理员同意申请，添加用户到组织。

##### 5. 创建组织

- **接口名称**：/api/organization/create
- **功能**：用户创建新组织，生成组织 ID，创建者自动成为管理者。



### 五、**创建会议**

##### 1. 下拉框选择组织

- **接口名称**：/api/user/organizations
- **功能**：获取用户有权限创建会议的组织列表。

##### 2. 选择组织中需要参加会议的成员

- **接口名称**：/api/organization/<org_id>/members
- **功能**：选择组织后，获取该组织的所有成员，供用户选择参会成员。

##### 3. 选择会议的关键成员

**功能**：从参会成员中选择关键成员（缺少关键成员无法开会）。
 （此功能无需单独接口，前端可在选择参会成员后，提供额外选项标记某些成员为“关键成员”，提交时包含在请求中。）

##### 4. 设置最低参会人数

**功能**：设置最低参会人数，默认为总人数的 75%（向下取整）。
 （此功能也无需单独接口，前端计算默认值，用户可手动修改，提交时包含在请求中。）

##### 5. 设置会议时长

**功能**：用户输入会议时长（例如 1 小时）。
 （无需接口，前端直接收集用户输入，提交时包含在请求中。）

##### 6. 按钮：建议时间（动态规划算法）

- **接口名称**：/api/meeting/suggest-time
- **功能**：接收参会成员、关键成员、会议时长、最低参会人数，根据所选成员的日程使用动态规划算法推荐会议时间。

##### 7. 展示建议时间及可参会人数

**功能**：前端接收 /api/meeting/suggest-time 的返回结果，展示建议时间和可参会人数（已按人数降序排列）。（无需额外接口，前端直接渲染返回的 suggestions 数据。）

##### 8. 创建会议

- **接口名称**：/api/meeting/create
- **功能**：创建会议，添加到参与者日程。



### 六、个人设置

##### 1. 显示默认头像，点击上传修改

###### 1.1 获取用户头像

- **接口名称**：/api/user/avatar
- **功能**：获取用户当前头像的 URL（或默认头像）。

###### **1.2 上传新头像**

- **接口名称**：/api/user/avatar/upload
- **功能**：上传图片文件，更新用户头像。

##### 2. 设置昵称

- **接口名称**：/api/user/nickname
- **功能**：用户输入新昵称，保存到个人账户信息。

##### 3. 修改绑定手机（用短信验证码验证）

###### 3.1 发送短信验证码

- **接口名称**：/api/user/phone/send-code
- **功能**：发送短信验证码到用户输入的新手机号。

###### **3.2 验证并更新绑定手机**

- **接口名称**：/api/user/phone/update
- **功能**：验证短信验证码，更新用户绑定手机。

##### 4. 修改密码

- **接口名称**：/api/user/password
- **功能**：用户输入新密码，更新密码。

##### 5. 获取用户信息（页面初始化）

- **接口名称**：/api/user/info
- **功能**：页面加载时，获取用户当前信息（头像、昵称、手机号码）以填充表单。
