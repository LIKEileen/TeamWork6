

## 登录页

### **登录接口**

**接口名称**：`/api/login`

**功能**：接收用户名（手机号或邮箱）、密码，验证用户身份并返回登录结果（成功或失败）。成功时返回用户 token 或 session 信息，失败时返回错误信息（如“密码错误”或“验证码错误”）。

**请求参数**：

| 字段     | 说明       | 类型   | 备注                           | 是否必填 |
| -------- | ---------- | ------ | ------------------------------ | -------- |
| phone    | 用户手机号 | string | 如果使用手机号登录，此字段必填 | 否       |
| email    | 用户邮箱   | string | 如果使用邮箱登录，此字段必填   | 否       |
| password | 用户密码   | string | 登录密码                       | 是       |

**返回参数**：

| 字段    | 说明         | 类型   | 备注                          | 是否必填 |
| ------- | ------------ | ------ | ----------------------------- | -------- |
| code    | 接口状态码   | number | 成功：1，失败：0              | 是       |
| message | 接口返回信息 | string | 成功：success，失败：错误信息 | 是       |
| data    | 用户数据     | object | 用户信息，包括 token 和头像等 | 是       |

**data** 字段：

| 字段     | 说明           | 类型   | 备注                   | 是否必填 |
| -------- | -------------- | ------ | ---------------------- | -------- |
| token    | 用户身份 token | string | 登录成功后返回的 token | 是       |
| nickname | 用户昵称       | string | 用户的昵称             | 是       |
| avatar   | 用户头像       | string | 用户头像 URL           | 否       |
| email    | 用户邮箱       | string | 用户邮箱               | 否       |
| phone    | 用户手机号     | string | 用户手机号             | 否       |
| role     | 用户角色       | string | 角色，如：user，admin  | 否       |

**示例请求**：

```http
POST /api/login
```

请求体：

```json
{
  "phone": "13812345678",
  "password": "123456"
}
```

**响应**：

```json
{
  "code": 1,
  "message": "success",
  "data": {
    "token": "mock-token-abc123",
    "nickname": "张三",
    "avatar": "https://example.com/avatar.jpg",
    "email": "zhangsan@example.com",
    "phone": "13812345678",
    "role": "user"
  }
}
```



### 注册接口

**接口名称**：`/api/register`

**功能**：接收新用户的信息（如用户名、手机号、邮箱等），验证信息合法性（例如用户名是否已存在），然后创建新用户账户，返回注册结果。

**请求参数**：

| 字段     | 说明       | 类型   | 备注                   | 是否必填 |
| -------- | ---------- | ------ | ---------------------- | -------- |
| nickname | 用户昵称   | string | 用户在注册时输入的昵称 | 是       |
| phone    | 用户手机号 | string | 用户手机号             | 否       |
| email    | 用户邮箱   | string | 用户邮箱               | 否       |
| password | 用户密码   | string | 用户密码               | 是       |

**返回参数**：

| 字段    | 说明         | 类型   | 备注                          | 是否必填 |
| ------- | ------------ | ------ | ----------------------------- | -------- |
| code    | 接口状态码   | number | 成功：1，失败：0              | 是       |
| message | 接口返回信息 | string | 成功：success，失败：错误信息 | 是       |
| data    | 用户数据     | object | 用户信息，包含 token 和头像等 | 是       |

**data** 字段：

| 字段     | 说明           | 类型   | 备注                   | 是否必填 |
| -------- | -------------- | ------ | ---------------------- | -------- |
| token    | 用户身份 token | string | 注册成功后返回的 token | 是       |
| nickname | 用户昵称       | string | 用户的昵称             | 是       |
| avatar   | 用户头像       | string | 用户头像 URL           | 否       |
| email    | 用户邮箱       | string | 用户邮箱               | 否       |
| phone    | 用户手机号     | string | 用户手机号             | 否       |
| role     | 用户角色       | string | 角色，如：user，admin  | 否       |



**示例请求**：

```http
POST /api/register
```

请求体：

```json
{
  "nickname": "李四",
  "phone": "13887654321",
  "email": "lisi@example.com",
  "password": "abcd1234"
}
```

**响应**：

```json
{
  "code": 1,
  "message": "success",
  "data": {
    "token": "mock-token-xyz456",
    "nickname": "李四",
    "avatar": "https://example.com/avatar.jpg",
    "email": "lisi@example.com",
    "phone": "13887654321",
    "role": "user"
  }
}
```



### **绑定手机号接口**

**接口名称**：`/api/bind`

**功能**：接收用户提供的手机号、昵称和密码，验证信息合法性，绑定手机号至用户账户，成功后返回用户信息（包括 token）。

**请求参数**：

| 字段     | 说明       | 类型   | 备注                 | 是否必填 |
| -------- | ---------- | ------ | -------------------- | -------- |
| phone    | 用户手机号 | string | 用户要绑定的手机号   | 是       |
| nickname | 用户昵称   | string | 用户绑定时输入的昵称 | 是       |
| password | 用户密码   | string | 用户的密码           | 是       |

**返回参数**：

| 字段    | 说明         | 类型   | 备注                          | 是否必填 |
| ------- | ------------ | ------ | ----------------------------- | -------- |
| code    | 接口状态码   | number | 成功：1，失败：0              | 是       |
| message | 接口返回信息 | string | 成功：success，失败：错误信息 | 是       |
| data    | 用户数据     | object | 包含用户信息（token、昵称等） | 是       |

**data** 字段：

| 字段     | 说明           | 类型   | 备注                  | 是否必填 |
| -------- | -------------- | ------ | --------------------- | -------- |
| token    | 用户身份 token | string | 成功绑定后的 token    | 是       |
| nickname | 用户昵称       | string | 用户的昵称            | 是       |
| avatar   | 用户头像       | string | 用户头像 URL          | 否       |
| email    | 用户邮箱       | string | 用户邮箱              | 否       |
| phone    | 用户手机号     | string | 用户绑定的手机号      | 是       |
| role     | 用户角色       | string | 角色，如：user，admin | 否       |



**示例请求**：

```http
POST /api/bind
```

请求体：

```json
{
  "phone": "13812345678",
  "nickname": "张三",
  "password": "123456"
}
```

**响应**：

```json
{
  "code": 1,
  "message": "绑定成功",
  "data": {
    "token": "mock-token-xyz789",
    "nickname": "张三",
    "avatar": "https://example.com/avatar.jpg",
    "email": "zhangsan@example.com",
    "phone": "13812345678",
    "role": "user"
  }
}
```



### **发送验证码接口**

**接口名称：**`/api/send-verification-code`

**功能**：将验证码发送到用户的邮箱。

**请求参数**：

| 字段  | 说明     | 类型   | 备注           | 是否必填 |
| ----- | -------- | ------ | -------------- | -------- |
| email | 用户邮箱 | string | 用户的邮箱地址 | 是       |

**返回参数**：

| 字段    | 说明         | 类型   | 备注                               | 是否必填 |
| ------- | ------------ | ------ | ---------------------------------- | -------- |
| code    | 接口状态码   | number | 成功：200，失败：400               | 是       |
| message | 接口返回信息 | string | 成功：验证码已发送，失败：错误信息 | 是       |

**示例请求**：

```http
POST /api/send-verification-code
```

请求体：

```json
{
  "email": "zhangsan@example.com"
}
```

**响应**：

成功响应：

```json
{
  "code": 200,
  "message": "验证码已发送"
}
```

失败响应：

```json
{
  "code": 400,
  "message": "邮箱未注册"
}
```

------



### **重置密码**

**接口名称：**`/api/reset-password`

**功能**：重置用户的密码，需提供邮箱、验证码和新密码。

**请求参数**：

| 字段     | 说明     | 类型   | 备注                 | 是否必填 |
| -------- | -------- | ------ | -------------------- | -------- |
| email    | 用户邮箱 | string | 用户的邮箱地址       | 是       |
| code     | 验证码   | string | 用户收到的验证码     | 是       |
| password | 新密码   | string | 用户想要设置的新密码 | 是       |

**返回参数**：

| 字段    | 说明         | 类型   | 备注                               | 是否必填 |
| ------- | ------------ | ------ | ---------------------------------- | -------- |
| code    | 接口状态码   | number | 成功：200，失败：400               | 是       |
| message | 接口返回信息 | string | 成功：密码重置成功，失败：错误信息 | 是       |

**示例请求**：

```http
POST /api/reset-password
```

请求体：

```json
{
  "email": "zhangsan@example.com",
  "code": "123456",
  "password": "newpassword123"
}
```

**示例响应**：

成功响应：

```json
{
  "code": 200,
  "message": "密码重置成功"
}
```

失败响应：

```json
{
  "code": 400,
  "message": "密码重置失败"
}
```



### **退出登录**

**接口名称**：`/api/logout`

**功能**：接收用户的 `token`，用于清除用户登录状态并退出登录。

**请求参数**：

| 字段  | 说明           | 类型   | 备注                         | 是否必填 |
| ----- | -------------- | ------ | ---------------------------- | -------- |
| token | 用户身份 token | string | 当前登录用户的身份验证 token | 是       |

**返回参数**：

| 字段    | 说明         | 类型   | 备注                          | 是否必填 |
| ------- | ------------ | ------ | ----------------------------- | -------- |
| code    | 接口状态码   | number | 成功：1，失败：0              | 是       |
| message | 接口返回信息 | string | 成功：success，失败：错误信息 | 是       |

**示例请求**：

```http
POST /api/logout
```

请求体：

```json
{
  "token": "mock-token-xyz789"
}
```

**示例响应**：

```json
{
  "code": 1,
  "message": "退出成功"
}
```

**说明：**

- 在前端实现时，退出时需要传递当前用户的 `token`，后端根据 `token` 进行验证后清除会话或销毁用户的登录状态。
- 在退出成功后，前端会清除本地存储的 `token`，并跳转到登录页。



## 日程相关

### **获取用户日程**

**接口名称：**`/api/user/schedule`

**功能**：根据用户 token 获取该用户的日程事件列表。

**请求参数**：

| 字段  | 说明         | 类型   | 备注                 | 是否必填 |
| ----- | ------------ | ------ | -------------------- | -------- |
| token | 用户身份验证 | string | 当前登录用户的 token | 是       |

**返回参数**：

| 字段    | 说明             | 类型     | 备注                               | 是否必填 |
| ------- | ---------------- | -------- | ---------------------------------- | -------- |
| code    | 接口状态码       | number   | 成功：1，失败：0                   | 是       |
| message | 返回信息         | string   | success 或 错误信息                | 是       |
| data    | 日程事件列表数组 | object[] | 每个事件包括 id、title、日期等字段 | 是       |

**单个 data 事件字段说明**：

| 字段  | 说明     | 类型   | 备注               |
| ----- | -------- | ------ | ------------------ |
| id    | 事件 ID  | number | 全局唯一           |
| title | 事件名称 | string |                    |
| day   | 事件日期 | string | 格式 YYYY-MM-DD    |
| start | 开始时间 | string | 格式 HH:mm         |
| end   | 结束时间 | string | 格式 HH:mm         |
| color | 事件颜色 | string | 可选，十六进制色值 |

------

**示例请求**：

```http
POST /api/user/schedule
```

请求体：

```json
{
  "token": "mock-token-abc123"
}
```

**成功响应**：

```json
{
  "code": 1,
  "message": "success",
  "data": [
    { "id": 1, "title": "数学课", "day": "2025-04-26", "start": "08:00", "end": "09:30", "color": "#F56C6C" },
    { "id": 2, "title": "干活", "day": "2025-04-27", "start": "10:00", "end": "11:30", "color": "#67C23A" }
  ]
}
```

**失败响应**：

```json
{
  "code": 0,
  "message": "用户未登录或 token 无效"
}
```



### 新增单次事件

**接口名称：**`/api/user/schedule/add`

**功能**：添加一个新的单次日程事件。

**请求参数**：

| 字段  | 说明         | 类型   | 备注                    | 是否必填 |
| ----- | ------------ | ------ | ----------------------- | -------- |
| token | 用户身份验证 | string | 当前登录用户的 token    | 是       |
| title | 事件名称     | string | 不能为空，长度不超过100 | 是       |
| date  | 事件日期     | string | 格式：YYYY-MM-DD        | 是       |
| start | 开始时间     | string | 格式：HH:mm             | 是       |
| end   | 结束时间     | string | 格式：HH:mm             | 是       |
| color | 事件颜色     | string | 可选，十六进制色号      | 否       |

**返回参数**：

| 字段    | 说明         | 类型   | 备注                | 是否必填 |
| ------- | ------------ | ------ | ------------------- | -------- |
| code    | 接口状态码   | number | 成功：1，失败：0    | 是       |
| message | 接口返回信息 | string | success 或 错误信息 | 是       |
| data    | 返回新增事件 | object | 包括事件id、title等 | 是       |

**示例请求**：

```http
POST /api/user/schedule/add
```

请求体：

```json
{
  "token": "mock-token-abc123",
  "title": "数学课",
  "date": "2025-04-26",
  "start": "08:00",
  "end": "09:30",
  "color": "#409EFF"
}
```

**成功响应**：

```json
{
  "code": 1,
  "message": "success",
  "data": {
    "id": 12,
    "title": "数学课",
    "day": "2025-04-26",
    "start": "08:00",
    "end": "09:30",
    "color": "#409EFF"
  }
}
```

**失败响应**：

```json
{
  "code": 0,
  "message": "添加事件失败"
}
```

------

### **添加长期事件**

**接口名称：**`/api/user/schedule/add/recurring`

**功能**：添加一个长期重复发生的日程事件。

**请求参数**：



| 字段        | 说明         | 类型     | 备注                        | 是否必填 |
| ----------- | ------------ | -------- | --------------------------- | -------- |
| token       | 用户身份验证 | string   | 当前登录用户的 token        | 是       |
| title       | 事件名称     | string   | 不能为空                    | 是       |
| start       | 开始时间     | string   | 格式：HH:mm                 | 是       |
| end         | 结束时间     | string   | 格式：HH:mm                 | 是       |
| frequency   | 重复频率     | string   | daily/weekly/monthly/custom | 是       |
| customDates | 自定义日期组 | string[] | 当 frequency=custom 时必填  | 否       |
| color       | 事件颜色     | string   | 可选                        | 否       |

**返回参数**：



| 字段    | 说明         | 类型   | 备注                | 是否必填 |
| ------- | ------------ | ------ | ------------------- | -------- |
| code    | 接口状态码   | number | 成功：1，失败：0    | 是       |
| message | 接口返回信息 | string | success 或 错误信息 | 是       |

**示例请求**：

```http
POST /api/user/schedule/add/recurring
```

请求体：

```json
{
  "token": "mock-token-abc123",
  "title": "晨跑",
  "start": "06:30",
  "end": "07:30",
  "frequency": "daily",
  "color": "#67C23A"
}
```

**成功响应**：

```json
{
  "code": 1,
  "message": "success"
}
```

**失败响应**：

```json
{
  "code": 0,
  "message": "添加失败"
}
```

------



### **导入 Excel 课表**

**接口名称：**`/api/user/schedule/import/excel`

**功能**：通过上传 Excel 文件导入日程事件。

**请求参数**：

| 字段  | 说明         | 类型   | 备注                 | 是否必填 |
| ----- | ------------ | ------ | -------------------- | -------- |
| token | 用户身份验证 | string | 当前登录用户的 token | 是       |
| file  | 上传文件     | file   | 上传 .xlsx 文件      | 是       |

**返回参数**：

| 字段    | 说明         | 类型   | 备注                | 是否必填 |
| ------- | ------------ | ------ | ------------------- | -------- |
| code    | 接口状态码   | number | 成功：1，失败：0    | 是       |
| message | 接口返回信息 | string | success 或 错误信息 | 是       |

**示例请求**：

通过 FormData 上传。

**成功响应**：

```json
{
  "code": 1,
  "message": "success"
}
```

------



### **导入学校课表（wip）**

**接口名称：**`/api/user/schedule/import/school`

**功能**：选择学校后导入官方课表。

**请求参数**：

| 字段   | 说明         | 类型   | 备注                     | 是否必填 |
| ------ | ------------ | ------ | ------------------------ | -------- |
| token  | 用户身份验证 | string | 当前登录用户的 token     | 是       |
| school | 学校名称     | string | 如：清华大学、北京大学等 | 是       |

**返回参数**：

| 字段    | 说明         | 类型   | 备注                | 是否必填 |
| ------- | ------------ | ------ | ------------------- | -------- |
| code    | 接口状态码   | number | 成功：1，失败：0    | 是       |
| message | 接口返回信息 | string | success 或 错误信息 | 是       |

**示例请求**：

```http
POST /api/user/schedule/import/school
```

请求体：

```json
{
  "token": "mock-token-abc123",
  "school": "清华大学"
}
```

**成功响应**：

```json
{
  "code": 1,
  "message": "success"
}
```

------



### **删除单个事件**

**接口名称：**`/api/user/schedule/delete`

**功能**：删除一个日程事件。

**请求参数**：

| 字段    | 说明         | 类型   | 备注                 | 是否必填 |
| ------- | ------------ | ------ | -------------------- | -------- |
| token   | 用户身份验证 | string | 当前登录用户的 token | 是       |
| eventId | 事件 ID      | number | 需要删除的事件 ID    | 是       |

**返回参数**：

| 字段    | 说明         | 类型   | 备注                | 是否必填 |
| ------- | ------------ | ------ | ------------------- | -------- |
| code    | 接口状态码   | number | 成功：1，失败：0    | 是       |
| message | 接口返回信息 | string | success 或 错误信息 | 是       |

**示例请求**：

```http
POST /api/user/schedule/delete
```

请求体：

```json
{
  "token": "mock-token-abc123",
  "eventId": 8
}
```

**成功响应**：

```json
{
  "code": 1,
  "message": "success"
}
```

**失败响应**：

```json
{
  "code": 0,
  "message": "事件不存在"
}
```



## 用户信息 API 接口 

### **更新用户信息**

**接口名称：**`/api/user/update`

**功能**：更新当前登录用户的个人信息，包括昵称、手机号、邮箱等。

**请求参数**：

| 字段     | 说明           | 类型   | 备注                         | 是否必填 |
| -------- | -------------- | ------ | ---------------------------- | -------- |
| nickname | 用户昵称       | string | 用户的昵称                   | 是       |
| phone    | 用户手机号     | string | 用户的手机号                 | 否       |
| email    | 用户邮箱       | string | 用户的邮箱                   | 否       |
| token    | 用户身份 token | string | 当前登录用户的身份验证 token | 是       |

> **注意**：
>
> - `nickname` 为必填字段，该字段不能为空。
> - `phone` 和 `email` 是可选的，如果用户没有修改，后台可以忽略。

**返回参数**：

| 字段    | 说明         | 类型   | 备注                          | 是否必填 |
| ------- | ------------ | ------ | ----------------------------- | -------- |
| code    | 接口状态码   | number | 成功：1，失败：0              | 是       |
| message | 接口返回信息 | string | 成功：success，失败：错误信息 | 是       |
| data    | 用户信息     | object | 包含用户的最新信息            | 否       |

**data** 字段（返回的用户信息）：

| 字段     | 说明       | 类型   | 备注                | 是否必填 |
| -------- | ---------- | ------ | ------------------- | -------- |
| nickname | 用户昵称   | string | 更新后的昵称        | 是       |
| phone    | 用户手机号 | string | 更新后的手机号      | 否       |
| email    | 用户邮箱   | string | 更新后的邮箱        | 否       |
| avatar   | 用户头像   | string | 用户头像的 URL 地址 | 否       |

**示例请求**：

```http
POST /api/user/update
```

请求体：

```json
{
  "nickname": "张三",
  "phone": "13812345678",
  "email": "zhangsan@example.com",
  "token": "mock-token-abc123"
}
```

**响应**：

```json
{
  "code": 1,
  "message": "用户信息已更新",
  "data": {
    "nickname": "张三",
    "phone": "13812345678",
    "email": "zhangsan@example.com",
    "avatar": "/assets/default_icon.jpg"
  }
}
```

**说明**：

1. **`token`**：用于验证当前用户身份。只有通过身份验证的用户才能更新其信息。
2. **`code`**：接口返回的状态码，`1` 表示成功，`0` 表示失败。
3. **`message`**：接口返回的提示信息，成功时为 `"用户信息已更新"`，失败时为具体错误信息。
4. **`data`**：包含更新后的用户信息，包括 `nickname`、`phone`、`email` 和 `avatar`（头像 URL）。



### **修改密码**

**请求接口**：`/api/user/change-password`

**功能**：用于修改用户密码，接受原密码和新密码，成功后返回修改结果。

**请求参数**：

| 字段        | 说明           | 类型   | 备注                         | 是否必填 |
| ----------- | -------------- | ------ | ---------------------------- | -------- |
| oldPassword | 原密码         | string | 用户当前密码                 | 是       |
| newPassword | 新密码         | string | 用户想要修改的新密码         | 是       |
| token       | 用户身份 token | string | 当前登录用户的身份验证 token | 是       |

**返回参数**：

| 字段    | 说明         | 类型   | 备注                          | 是否必填 |
| ------- | ------------ | ------ | ----------------------------- | -------- |
| code    | 接口状态码   | number | 成功：1，失败：0              | 是       |
| message | 接口返回信息 | string | 成功：success，失败：错误信息 | 是       |

**示例请求**：

```http
POST /api/user/change-password
```

请求体：

```json
{
  "oldPassword": "123456",
  "newPassword": "newpassword123",
  "token": "mock-token-abc123"
}
```

**示例响应**：

```json
{
  "code": 1,
  "message": "密码修改成功"
}
```



## 头像相关的 API 文档

### **上传头像接口**

**接口名称：**`/api/user/avatar/upload`

**功能**：上传头像，保存头像文件并返回头像的 URL 地址。

**请求参数**：

| 字段   | 说明           | 类型   | 备注                         | 是否必填 |
| ------ | -------------- | ------ | ---------------------------- | -------- |
| avatar | 头像文件       | file   | 上传的头像图片文件           | 是       |
| token  | 用户身份 token | string | 当前登录用户的身份验证 token | 是       |

**返回参数**：

| 字段      | 说明          | 类型   | 备注                          | 是否必填 |
| --------- | ------------- | ------ | ----------------------------- | -------- |
| code      | 接口状态码    | number | 成功：1，失败：0              | 是       |
| message   | 接口返回信息  | string | 成功：success，失败：错误信息 | 是       |
| avatarUrl | 头像 URL 地址 | string | 头像上传后的访问 URL 地址     | 是       |

**示例请求**：

```http
POST /api/user/avatar/upload
```

请求体：

```json
{
  "avatar": "file_data", // 上传的头像文件
  "token": "mock-token-abc123"
}
```

**响应**：

```json
{
  "code": 1,
  "message": "头像上传成功",
  "avatarUrl": "/assets/demo_icon.jpg"  // 返回头像的 URL 地址
}
```

------



### **使用 QQ 头像接口**

**接口名称：**`/api/user/avatar/qq`

**功能**：使用 QQ 头像，传入 QQ 头像链接，更新用户头像。

**请求参数**：

| 字段   | 说明           | 类型   | 备注                         | 是否必填 |
| ------ | -------------- | ------ | ---------------------------- | -------- |
| avatar | QQ 头像链接    | string | 通过 QQ 获取的头像链接       | 是       |
| token  | 用户身份 token | string | 当前登录用户的身份验证 token | 是       |

**返回参数**：

| 字段      | 说明          | 类型   | 备注                          | 是否必填 |
| --------- | ------------- | ------ | ----------------------------- | -------- |
| code      | 接口状态码    | number | 成功：1，失败：0              | 是       |
| message   | 接口返回信息  | string | 成功：success，失败：错误信息 | 是       |
| avatarUrl | 头像 URL 地址 | string | 头像更新后的访问 URL 地址     | 是       |

**示例请求**：

```http
POST /api/user/avatar/qq
```

请求体：

```json
{
  "avatar": "http://q.qlogo.cn/headimg_dl?dst_uin=12345678&spec=640&img_type=jpg",
  "token": "mock-token-abc123"
}
```

**响应**：

```json
{
  "code": 1,
  "message": "QQ头像已更新",
  "avatarUrl": "http://q.qlogo.cn/headimg_dl?dst_uin=12345678&spec=640&img_type=jpg"
}
```



## 组织

### **用户所属组织列表**

**接口名称**：`/api/user/orglist`

**功能**：用于获取当前用户所属的所有组织信息，返回用户加入的组织列表。

**请求参数**：

| 字段  | 说明           | 类型   | 备注                           | 是否必填 |
| ----- | -------------- | ------ | ------------------------------ | -------- |
| token | 用户身份 token | string | 用户登录后获取的身份验证 token | 是       |

> 请求中通常会携带用户的 `token`，用于后台验证用户身份。

**返回参数**：

| 字段    | 说明             | 类型   | 备注                          | 是否必填 |
| ------- | ---------------- | ------ | ----------------------------- | -------- |
| code    | 接口状态码       | number | 成功：1，失败：0              | 是       |
| message | 接口返回信息     | string | 成功：success，失败：错误信息 | 是       |
| data    | 用户所属组织列表 | array  | 包含组织信息，具体结构见下表  | 是       |

**data** 字段：

| 字段    | 说明         | 类型   | 备注             | 是否必填 |
| ------- | ------------ | ------ | ---------------- | -------- |
| id      | 组织 ID      | number | 组织的唯一标识   | 是       |
| name    | 组织名称     | string | 用户所在的组织名 | 是       |
| members | 组织成员数量 | number | 该组织的成员数量 | 是       |

**示例请求**：

```http
GET /api/user/orglist
```

请求体：

```json
{
  "token": "mock-token-abc123"
}
```

**示例响应**：

```json
{
  "code": 1,
  "message": "success",
  "data": [
    {
      "id": 1,
      "name": "开发组",
      "members": 12
    },
    {
      "id": 2,
      "name": "运营组",
      "members": 8
    }
  ]
}
```

------



### **获取组织热力图**

**接口名称**：`GET /api/heatmap/:orgId`

**功能**：验证用户是否属于指定的组织，若是，则返回该组织在指定时间范围内的热力图数据；否则，返回错误信息。

**请求参数**

路径参数（Path）

| 字段  | 说明    | 类型   | 备注               | 是否必填 |
| ----- | ------- | ------ | ------------------ | -------- |
| orgId | 组织 ID | number | 请求的组织唯一标识 | 是       |

查询参数（Query）

| 字段       | 说明     | 类型   | 备注                          | 是否必填 |
| ---------- | -------- | ------ | ----------------------------- | -------- |
| start_date | 开始日期 | string | 格式为 yyyy-MM-dd             | 是       |
| end_date   | 结束日期 | string | 格式为 yyyy-MM-dd，最多 30 天 | 是       |

请求体（Body）

| 字段  | 说明           | 类型   | 备注                         | 是否必填 |
| ----- | -------------- | ------ | ---------------------------- | -------- |
| token | 用户身份 token | string | 当前登录用户的身份验证 token | 是       |

**返回参数**

| 字段    | 说明         | 类型   | 备注                          | 是否必填 |
| ------- | ------------ | ------ | ----------------------------- | -------- |
| code    | 接口状态码   | number | 成功：1，失败：0              | 是       |
| message | 接口返回信息 | string | 成功：success，失败：错误信息 | 是       |
| data    | 热力图数据   | object | 包含 n×24 网格的热力图数据    | 是       |

------

**data 字段结构说明**

| 字段    | 说明       | 类型  | 备注                                          | 是否必填 |
| ------- | ---------- | ----- | --------------------------------------------- | -------- |
| heatmap | 热力图数据 | array | 二维数组，共 24 行，每行 n 列（n = 日期天数） | 是       |

------

**示例请求**

```http
GET /api/heatmap/1?start_date=2025-04-26&end_date=2025-05-24
{
  "token": "mock-token-abc123"
}
```

------

成功响应示例

```json
{
  "code": 1,
  "message": "success",
  "data": {
    "heatmap": [
      [1, 2, 3, ..., 1, 0, 1, 2],
      [0, 1, 2, ..., 2, 1, 0, 3],
      [2, 3, 1, ..., 0, 0, 1, 0],
      ...
      (共 24 行，每行 n 列)
    ]
  }
}
```

 用户不属于该组织的错误响应

```json
{
  "code": 0,
  "message": "用户不属于该组织"
}
```

------

**备注**

- 后端需要通过 token 解析用户身份，判断其是否属于请求的 orgId。
- 若属于：返回该组织在指定时间段内的热力图数据；
- 若不属于：返回错误信息；
- 热力图为 24 行（表示从 08:00 到 20:00 每半小时），n 列表示所选天数（最多 30 天）。



## 大模型

### **获取大模型配置**

**接口名称**：`/api/llm/config`

**功能**：获取当前用户绑定的大语言模型（LLM）的配置，包括 `base_url`、`model_name`、`api_key` 和 `system_prompt`。

**请求参数**：

| 字段  | 说明           | 类型   | 备注                         | 是否必填 |
| ----- | -------------- | ------ | ---------------------------- | -------- |
| token | 用户身份 token | string | 当前登录用户的身份验证 token | 是       |

**返回参数**：

| 字段    | 说明           | 类型   | 备注                                                         | 是否必填 |
| ------- | -------------- | ------ | ------------------------------------------------------------ | -------- |
| code    | 接口状态码     | number | 成功：1，失败：0                                             | 是       |
| message | 接口返回信息   | string | 成功：success，失败：错误信息                                | 是       |
| data    | 大模型配置数据 | object | 包含 `base_url`、`model_name`、`api_key`、`system_prompt` 配置 | 是       |

**data** 字段：

| 字段          | 说明          | 类型   | 备注                        | 是否必填 |
| ------------- | ------------- | ------ | --------------------------- | -------- |
| base_url      | 模型 API 地址 | string | API 访问地址                | 是       |
| model_name    | 模型名称      | string | 如 `gpt-4`，`gpt-3.5-turbo` | 是       |
| api_key       | API 密钥      | string | 用于 API 调用的授权密钥     | 是       |
| system_prompt | 系统提示词    | string | 用于引导模型行为的默认语句  | 是       |

**示例请求**：

```http
GET /api/llm/config
```

请求体：

```json
{
  "token": "mock-token-abc123"
}
```

**响应**：

成功响应：

```json
{
  "code": 1,
  "message": "success",
  "data": {
    "base_url": "https://api.openai.com",
    "model_name": "gpt-4",
    "api_key": "sk-xxxxx",
    "system_prompt": "你是会易助手，擅长处理编程和写作任务"
  }
}
```

**说明**：

- 如果用户未设置或未绑定大模型配置，返回的数据中 `data` 为空或不包含字段。
- 通过 `token` 验证用户身份，后端返回当前用户绑定的大模型配置数据。



### **更新大模型配置**

**接口名称：**`/api/llm/config/update`

**功能**：将当前用户的大模型配置（如 `base_url`、`model_name`、`api_key`、`system_prompt`）保存到后端。

**请求参数**：

| 字段          | 说明           | 类型   | 备注                         | 是否必填 |
| ------------- | -------------- | ------ | ---------------------------- | -------- |
| base_url      | 模型 API 地址  | string | API 访问地址                 | 是       |
| model_name    | 模型名称       | string | 如 `gpt-4`，`gpt-3.5-turbo`  | 是       |
| api_key       | API 密钥       | string | 用于 API 调用的授权密钥      | 是       |
| system_prompt | 系统提示词     | string | 用于引导模型行为的默认语句   | 是       |
| token         | 用户身份 token | string | 当前登录用户的身份验证 token | 是       |

**返回参数**：

| 字段    | 说明         | 类型   | 备注                          | 是否必填 |
| ------- | ------------ | ------ | ----------------------------- | -------- |
| code    | 接口状态码   | number | 成功：1，失败：0              | 是       |
| message | 接口返回信息 | string | 成功：success，失败：错误信息 | 是       |

**示例请求**：

```
POST /api/llm/config/update
```

请求体：

```
{
  "base_url": "https://api.openai.com",
  "model_name": "gpt-4",
  "api_key": "sk-xxxxx",
  "system_prompt": "你是会易助手，擅长处理编程和写作任务",
  "token": "mock-token-abc123"
}
```

**响应**：

```
{
  "code": 1,
  "message": "大模型配置已保存"
}
```

**说明**：

- `token` 用于验证用户身份，只有经过验证的用户才能保存配置。
- 配置成功后，后端将返回 `success` 状态，并将配置保存到数据库。





并没有完成。现在背景颜色也没适配，显示还是个正方形，你改了点啥？显示区域现在要自由适配图片，不要固定，只有裁剪框固定 1:1
